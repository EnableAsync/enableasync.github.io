<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>kind</title>
    <url>/uncategorized/kind/</url>
    <content><![CDATA[<h1 id="è®°å¦‚ä½•ä½¿ç”¨-Kind-çš„ä¸€äº›ä½¿ç”¨æ–¹å¼"><a href="#è®°å¦‚ä½•ä½¿ç”¨-Kind-çš„ä¸€äº›ä½¿ç”¨æ–¹å¼" class="headerlink" title="è®°å¦‚ä½•ä½¿ç”¨ Kind çš„ä¸€äº›ä½¿ç”¨æ–¹å¼"></a>è®°å¦‚ä½•ä½¿ç”¨ Kind çš„ä¸€äº›ä½¿ç”¨æ–¹å¼</h1><h2 id="1-Kind-å®‰è£…"><a href="#1-Kind-å®‰è£…" class="headerlink" title="1. Kind å®‰è£…"></a>1. Kind å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.11.1/kind-linux-amd64</span><br><span class="line">chmod +x ./kind</span><br><span class="line">mv ./kind /usr/bin/kind</span><br></pre></td></tr></table></figure>

<h2 id="2-ä½¿ç”¨-Kind-åˆ›å»ºå«æœ‰ä¸¤ä¸ª-Node-çš„-kubernetes-é›†ç¾¤"><a href="#2-ä½¿ç”¨-Kind-åˆ›å»ºå«æœ‰ä¸¤ä¸ª-Node-çš„-kubernetes-é›†ç¾¤" class="headerlink" title="2. ä½¿ç”¨ Kind åˆ›å»ºå«æœ‰ä¸¤ä¸ª Node çš„ kubernetes é›†ç¾¤"></a>2. ä½¿ç”¨ Kind åˆ›å»ºå«æœ‰ä¸¤ä¸ª Node çš„ kubernetes é›†ç¾¤</h2><h3 id="1-åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#1-åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="1. åˆ›å»ºé…ç½®æ–‡ä»¶"></a>1. åˆ›å»ºé…ç½®æ–‡ä»¶</h3><p>è¿™é‡Œæˆ‘åˆ›å»ºäº†ä¸¤ä¸ª Nodeï¼Œä½¿ç”¨ä»¥ä¸‹é…ç½®æ–‡ä»¶ï¼Œå¹¶å°†å…¶å‘½åä¸º <code>kind.yaml</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># a cluster with 1 control-plane nodes and 2 workers</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Cluster</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">kind.x-k8s.io/v1alpha4</span></span><br><span class="line"><span class="attr">nodes:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">role:</span> <span class="string">control-plane</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">role:</span> <span class="string">worker</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">role:</span> <span class="string">worker</span></span><br></pre></td></tr></table></figure>

<h3 id="2-åˆ›å»ºé›†ç¾¤"><a href="#2-åˆ›å»ºé›†ç¾¤" class="headerlink" title="2. åˆ›å»ºé›†ç¾¤"></a>2. åˆ›å»ºé›†ç¾¤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo kind create cluster --config kind.yaml</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„ç‚¹æœ‰ï¼š</p>
<ol>
<li>ä¸è¦è®¾ç½®é›†ç¾¤ nameï¼Œåœ¨æˆ‘æœ¬åœ°ï¼Œå¦‚æœè®¾ç½®äº† name ä¼šå¯¼è‡´ kubeconfig æ— æ³•å¯¼å‡ºã€‚</li>
<li>è¦ä½¿ç”¨ sudoï¼Œåœ¨æˆ‘æœ¬åœ°ï¼Œå¦‚æœä¸ä½¿ç”¨ sudo ä¼šå¯¼è‡´æ— æ³•åˆ›å»ºé›†ç¾¤ï¼ŒåŸå› æœªçŸ¥ã€‚</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Creating cluster <span class="string">&quot;kind&quot;</span> ...</span><br><span class="line"> âœ“ Ensuring node image (kindest/node:v1.21.1) ğŸ–¼</span><br><span class="line"> âœ“ Preparing nodes ğŸ“¦ ğŸ“¦ ğŸ“¦  </span><br><span class="line"> âœ“ Writing configuration ğŸ“œ </span><br><span class="line"> âœ“ Starting control-plane ğŸ•¹ï¸ </span><br><span class="line"> âœ“ Installing CNI ğŸ”Œ </span><br><span class="line"> âœ“ Installing StorageClass ğŸ’¾ </span><br><span class="line"> âœ“ Joining worker nodes ğŸšœ </span><br><span class="line">Set kubectl context to <span class="string">&quot;kind-kind&quot;</span></span><br><span class="line">You can now use your cluster with:</span><br><span class="line"></span><br><span class="line">kubectl cluster-info --context kind-kind</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå‡ºç°ä»¥ä¸Šä¿¡æ¯è¡¨ç¤ºåˆ›å»ºæˆåŠŸï¼Œå¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p>
<h3 id="3-å¯¼å‡º-kubeconfig"><a href="#3-å¯¼å‡º-kubeconfig" class="headerlink" title="3. å¯¼å‡º kubeconfig"></a>3. å¯¼å‡º kubeconfig</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kind export kubeconfig</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸ä½¿ç”¨è¿™ä¸€æ­¥ï¼Œä¼šå¯¼è‡´ä½¿ç”¨ <code>kubectl</code> çš„æ—¶å€™å¿…é¡»åŠ ä¸Š <code>sudo</code>ï¼Œå¦åˆ™æ— æ³•è¿æ¥åˆ° kubernetesã€‚</p>
<h2 id="3-å®‰è£…-kubernetes-dashboard"><a href="#3-å®‰è£…-kubernetes-dashboard" class="headerlink" title="3. å®‰è£… kubernetes-dashboard"></a>3. å®‰è£… kubernetes-dashboard</h2><h3 id="1-ä½¿ç”¨-helm-å®‰è£…-dashboard"><a href="#1-ä½¿ç”¨-helm-å®‰è£…-dashboard" class="headerlink" title="1. ä½¿ç”¨ helm å®‰è£… dashboard"></a>1. ä½¿ç”¨ helm å®‰è£… dashboard</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Add kubernetes-dashboard repository</span></span><br><span class="line">helm repo add kubernetes-dashboard https://kubernetes.github.io/dashboard/</span><br><span class="line"><span class="comment"># Deploy a Helm Release named &quot;dashboard&quot; using the kubernetes-dashboard chart</span></span><br><span class="line">helm install dashboard kubernetes-dashboard/kubernetes-dashboard</span><br></pre></td></tr></table></figure>

<h3 id="2-è½¬å‘-dashboard-pod"><a href="#2-è½¬å‘-dashboard-pod" class="headerlink" title="2. è½¬å‘ dashboard pod"></a>2. è½¬å‘ dashboard pod</h3><p>è¿™ä¸€æ­¥çš„ç›®çš„æ˜¯åœ¨æœ¬åœ°è®¿é—®éƒ¨ç½²äº† dashboard çš„ pod</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> POD_NAME=$(kubectl get pods -n default -l <span class="string">&quot;app.kubernetes.io/name=kubernetes-dashboard,app.kubernetes.io/instance=dashboard&quot;</span> -o jsonpath=<span class="string">&quot;&#123;.items[0].metadata.name&#125;&quot;</span>)</span><br><span class="line">  <span class="built_in">echo</span> https://127.0.0.1:8443/</span><br><span class="line">  kubectl -n default port-forward <span class="variable">$POD_NAME</span> 8443:8443</span><br></pre></td></tr></table></figure>

<p>ä¹‹åä¼šæç¤º</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Forwarding from 127.0.0.1:8443 -&gt; 8443</span><br><span class="line">Forwarding from [::1]:8443 -&gt; 8443</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜è½¬å‘æˆåŠŸï¼Œæ­¤æ—¶è®¿é—® <a href="https://127.0.0.1:8443/">https://127.0.0.1:8443/</a> ï¼Œæ³¨æ„æ˜¯ https</p>
<h3 id="3-ç”Ÿæˆ-token"><a href="#3-ç”Ÿæˆ-token" class="headerlink" title="3. ç”Ÿæˆ token"></a>3. ç”Ÿæˆ token</h3><p>ä¸å‡ºæ„å¤– dashboard éœ€è¦ token æ¥ç™»å½•ï¼Œä½¿ç”¨ä»¥ä¸‹æ­¥éª¤æ¥ç”Ÿæˆ tokenï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl create serviceaccount dashboard -n default</span><br><span class="line">kubectl create rolebinding def-ns-admin --clusterrole=admin --serviceaccount=default:def-ns-admin</span><br><span class="line">kubectl create clusterrolebinding dashboard-cluster-admin --clusterrole=cluster-admin --serviceaccount=default:dashboard</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl describe sa dashboard</span><br><span class="line">Name:                dashboard</span><br><span class="line">Namespace:           default</span><br><span class="line">Labels:              &lt;none&gt;</span><br><span class="line">Annotations:         &lt;none&gt;</span><br><span class="line">Image pull secrets:  &lt;none&gt;</span><br><span class="line">Mountable secrets:   dashboard-token-vzzjn</span><br><span class="line">Tokens:              dashboard-token-vzzjn</span><br><span class="line">Events:              &lt;none&gt;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå¯ä»¥çœ‹åˆ° <code>dashboard-token-vzzjn</code> å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ tokenï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ˜¾ç¤ºå…·ä½“å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl describe secret dashboard-token-vzzjn</span><br></pre></td></tr></table></figure>

<p>ä¹‹åå°±å¯ä»¥å°†å…·ä½“çš„ token ç²˜è´´åœ¨ dashboard ä¸­ç™»å½•ã€‚</p>
]]></content>
      <tags>
        <tag>k8s, kind</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux ä¸­çš„ä¸€äº›å‘</title>
    <url>/linux/linux/</url>
    <content><![CDATA[<h2 id="è¾“å…¥æ³•"><a href="#è¾“å…¥æ³•" class="headerlink" title="è¾“å…¥æ³•"></a>è¾“å…¥æ³•</h2><h3 id="Fcitx-å¤±æ•ˆ"><a href="#Fcitx-å¤±æ•ˆ" class="headerlink" title="Fcitx å¤±æ•ˆ"></a>Fcitx å¤±æ•ˆ</h3><ol>
<li><p>ä½¿ç”¨ im-config ä¿®å¤</p>
</li>
<li><p>å¯èƒ½æ˜¯ fcitx æ²¡æœ‰æ­£å¸¸å¯åŠ¨ï¼Œå³è¿˜æ˜¯ ibusï¼Œå¯ä»¥ä¿®æ”¹ ~/.pam_environment</p>
</li>
<li><p>åˆ é™¤ /etc/profile.d/pop-im-ibus.sh</p>
<p><code>/etc/profile.d/pop-im-ibus.sh</code> ï¼ˆæºæ–‡ä»¶ï¼š /etc/gdm3/Xsession ï¼‰è®¾ç½®äº†ç¯å¢ƒå˜é‡ <code>XMODIFIERS</code> ï¼Œåœ¨ <code>/etc/X11/Xsession.d/70im-config_launch</code> ä¸­æœ‰å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$XMODIFIERS</span>&quot;</span> ] &amp;&amp; \  <span class="comment"># å¦‚æœç¯å¢ƒå˜é‡ XMODIFIERS æ²¡æœ‰è¢«è®¾ç½®</span></span><br><span class="line">   ...</span><br><span class="line">   <span class="comment"># è®¾ç½®ç¯å¢ƒå˜é‡ä»¥å¯åŠ¨ç”¨æˆ·æŒ‡å®šçš„è¾“å…¥æ³•</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>å› ä¸º <code>XMODIFIERS</code> è¢«è®¾ç½®äº†ï¼Œæ‰€ä»¥ <code>è®¾ç½®ç¯å¢ƒå˜é‡ä»¥å¯åŠ¨ç”¨æˆ·æŒ‡å®šçš„è¾“å…¥æ³•</code> æ²¡æœ‰æ‰§è¡Œï¼Œæ‰€ä»¥ fcitx æ²¡æœ‰è¢«å¯åŠ¨ã€‚</p>
<p><code>/etc/profile.d/pop-im-ibus.sh</code> ç¬¬ä¸€æ¬¡å‡ºç°äº <code>pop-os_20.10_amd64_intel_4.iso</code> ï¼ˆå‘å¸ƒäº 2020 å¹´ 12 æœˆä¸­æ—¬ï¼‰</p>
<p>ç›¸å…³ issueï¼Œ<a href="https://github.com/pop-os/pop/issues/1445">https://github.com/pop-os/pop/issues/1445</a></p>
</li>
</ol>
<h2 id="Dash-to-dock"><a href="#Dash-to-dock" class="headerlink" title="Dash to dock"></a>Dash to dock</h2><h3 id="Dash-to-dock-é‡å é—®é¢˜"><a href="#Dash-to-dock-é‡å é—®é¢˜" class="headerlink" title="Dash to dock é‡å é—®é¢˜"></a>Dash to dock é‡å é—®é¢˜</h3><p>   Pop os è‡ªå¸¦çš„ Dock ä¸ Dash to dock å‘ç”Ÿäº†é‡å </p>
   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/share/gnome-shell/extensions</span><br><span class="line">sudo mv cosmic-dock@system76.com cosmic-dock@system76.com.bak # å…³é—­è‡ªå¸¦çš„ dock</span><br></pre></td></tr></table></figure>

<p>   ä¹‹åé‡å¯ gnome å³å¯è§£å†³</p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
  </entry>
</search>
